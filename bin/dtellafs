#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'
require 'dtellafs'

directory = File.expand_path('../tmp', __FILE__)
FileUtils.mkdir_p directory

fo = DtellaFS::Fuse.new(directory,["allow_other"],["debug"],
  DtellaFS::Dir.new("",493));
#kernel:  default_permissions,allow_other,kernel_cache,large_read,direct_io
#         max_read=N,fsname=NAME
#library: debug,hard_remove

Signal.trap("TERM") do
  fo.exit
  fo.unmount
end

begin
  fo.loop
rescue
  print "Error:" + $!
end
