#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'
require 'dtellafs'

fo = DtellaFS::Fuse.new("/tmp/fuse",["allow_other"],["debug"],
  DtellaFS::Fuse.new("",493));
#kernel:  default_permissions,allow_other,kernel_cache,large_read,direct_io
#         max_read=N,fsname=NAME
#library: debug,hard_remove

Signal.trap("TERM") do
  fo.exit
  fo.unmount
end

begin
  fo.loop
rescue
  print "Error:" + $!
end
